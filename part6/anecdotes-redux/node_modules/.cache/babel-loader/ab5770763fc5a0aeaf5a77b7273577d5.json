{"ast":null,"code":"import _objectSpread from \"/Users/bonnieyan/Desktop/Full_stack_2020/part6/anecdotes-redux/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport anecdoteService from '../services/anecdotes';\nexport const vote = anecdote => {\n  // return {\n  //   type: 'VOTE',\n  //   data: id\n  // }\n  return async dispatch => {\n    const newAnec = await anecdoteService.updateVotes(anecdote);\n    dispatch({\n      type: 'VOTE',\n      data: newAnec\n    });\n  };\n};\nexport const add = content => {\n  return async dispatch => {\n    const data = await anecdoteService.createNew(content);\n    dispatch({\n      type: 'ADD',\n      data\n    });\n  };\n};\nexport const initAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll();\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      data: anecdotes\n    });\n  };\n};\n\nconst anecReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'VOTE':\n      const anecdote = action.data;\n      console.log(action);\n\n      const updatedAne = _objectSpread({}, anecdote, {\n        votes: anecdote.votes + 1\n      });\n\n      const updatedState = state.map(e => e.id !== action.data ? e : updatedAne);\n      return updatedState.sort((a, b) => b.votes - a.votes);\n\n    case 'ADD':\n      console.log(action.data);\n      state = [...state, action.data];\n      return state;\n\n    case 'INIT_ANECDOTES':\n      console.log('hello');\n      return state = action.data;\n\n    default:\n      return state;\n  }\n};\n\nexport default anecReducer;","map":{"version":3,"sources":["/Users/bonnieyan/Desktop/Full_stack_2020/part6/anecdotes-redux/src/reducers/anecdoteReducer.js"],"names":["anecdoteService","vote","anecdote","dispatch","newAnec","updateVotes","type","data","add","content","createNew","initAnecdotes","anecdotes","getAll","anecReducer","state","action","console","log","updatedAne","votes","updatedState","map","e","id","sort","a","b"],"mappings":";AAAA,OAAOA,eAAP,MAA4B,uBAA5B;AAEA,OAAO,MAAMC,IAAI,GAAGC,QAAQ,IAAI;AAC9B;AACA;AACA;AACA;AACA,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMC,OAAO,GAAG,MAAMJ,eAAe,CAACK,WAAhB,CAA4BH,QAA5B,CAAtB;AACAC,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,MADC;AAEPC,MAAAA,IAAI,EAAEH;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CAZM;AAcP,OAAO,MAAMI,GAAG,GAAIC,OAAD,IAAa;AAC9B,SAAO,MAAMN,QAAN,IAAkB;AACvB,UAAMI,IAAI,GAAG,MAAMP,eAAe,CAACU,SAAhB,CAA0BD,OAA1B,CAAnB;AACAN,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,KADC;AAEPC,MAAAA;AAFO,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAMI,aAAa,GAAG,MAAM;AACjC,SAAO,MAAMR,QAAN,IAAkB;AACvB,UAAMS,SAAS,GAAG,MAAMZ,eAAe,CAACa,MAAhB,EAAxB;AACAV,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,gBADC;AAEPC,MAAAA,IAAI,EAAEK;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;;AAUP,MAAME,WAAW,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAC1C,UAAOA,MAAM,CAACV,IAAd;AACA,SAAK,MAAL;AACE,YAAMJ,QAAQ,GAAGc,MAAM,CAACT,IAAxB;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,YAAMG,UAAU,qBAAOjB,QAAP;AAAiBkB,QAAAA,KAAK,EAAElB,QAAQ,CAACkB,KAAT,GAAiB;AAAzC,QAAhB;;AACA,YAAMC,YAAY,GAAGN,KAAK,CAACO,GAAN,CAAUC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASR,MAAM,CAACT,IAAhB,GAAuBgB,CAAvB,GAA2BJ,UAA1C,CAArB;AACA,aAAOE,YAAY,CAACI,IAAb,CAAkB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACP,KAAF,GAAUM,CAAC,CAACN,KAAxC,CAAP;;AACF,SAAK,KAAL;AACEH,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACT,IAAnB;AACAQ,MAAAA,KAAK,GAAG,CAAC,GAAGA,KAAJ,EAAWC,MAAM,CAACT,IAAlB,CAAR;AACA,aAAOQ,KAAP;;AACF,SAAK,gBAAL;AACEE,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,aAAOH,KAAK,GAAEC,MAAM,CAACT,IAArB;;AACF;AACE,aAAOQ,KAAP;AAfF;AAkBD,CAnBD;;AAqBA,eAAeD,WAAf","sourcesContent":["import anecdoteService from '../services/anecdotes'\n\nexport const vote = anecdote => {\n  // return {\n  //   type: 'VOTE',\n  //   data: id\n  // }\n  return async dispatch => {\n    const newAnec = await anecdoteService.updateVotes(anecdote)\n    dispatch({\n      type: 'VOTE',\n      data: newAnec\n    })\n  }\n}\n\nexport const add = (content) => {\n  return async dispatch => {\n    const data = await anecdoteService.createNew(content)\n    dispatch({\n      type: 'ADD',\n      data,\n    })\n  }\n}\n\nexport const initAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll()\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      data: anecdotes\n    })\n  }\n}\n\nconst anecReducer = (state = [], action) => {\n  switch(action.type){\n  case 'VOTE':\n    const anecdote = action.data\n    console.log(action)\n    const updatedAne = {...anecdote, votes: anecdote.votes + 1}\n    const updatedState = state.map(e => e.id !== action.data ? e : updatedAne)\n    return updatedState.sort((a, b) => b.votes - a.votes)\n  case 'ADD':\n    console.log(action.data)\n    state = [...state, action.data]\n    return state\n  case 'INIT_ANECDOTES':\n    console.log('hello')\n    return state= action.data\n  default:\n    return state\n  }\n  \n}\n\nexport default anecReducer"]},"metadata":{},"sourceType":"module"}