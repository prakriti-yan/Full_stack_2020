{"ast":null,"code":"import anecdoteService from '../services/anecdotes';\nexport const vote = anecdote => {\n  // return {\n  //   type: 'VOTE',\n  //   data: id\n  // }\n  return async dispatch => {\n    const newAnec = await anecdoteService.updateVotes(anecdote);\n    dispatch({\n      type: 'VOTE',\n      data: newAnec\n    });\n  };\n};\nexport const add = content => {\n  return async dispatch => {\n    const data = await anecdoteService.createNew(content);\n    dispatch({\n      type: 'ADD',\n      data\n    });\n  };\n};\nexport const initAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll();\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      data: anecdotes\n    });\n  };\n};\n\nconst anecReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'VOTE':\n      const updatedAne = action.data;\n      const updatedState = state.map(e => e.id !== action.data.id ? e : updatedAne);\n      return updatedState.sort((a, b) => b.votes - a.votes);\n\n    case 'ADD':\n      console.log(action.data);\n      state = [...state, action.data];\n      return state;\n\n    case 'INIT_ANECDOTES':\n      console.log('hello');\n      return state = action.data;\n\n    default:\n      return state;\n  }\n};\n\nexport default anecReducer;","map":{"version":3,"sources":["/Users/bonnieyan/Desktop/Full_stack_2020/part6/anecdotes-redux/src/reducers/anecdoteReducer.js"],"names":["anecdoteService","vote","anecdote","dispatch","newAnec","updateVotes","type","data","add","content","createNew","initAnecdotes","anecdotes","getAll","anecReducer","state","action","updatedAne","updatedState","map","e","id","sort","a","b","votes","console","log"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,uBAA5B;AAEA,OAAO,MAAMC,IAAI,GAAGC,QAAQ,IAAI;AAC9B;AACA;AACA;AACA;AACA,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMC,OAAO,GAAG,MAAMJ,eAAe,CAACK,WAAhB,CAA4BH,QAA5B,CAAtB;AACAC,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,MADC;AAEPC,MAAAA,IAAI,EAAEH;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CAZM;AAcP,OAAO,MAAMI,GAAG,GAAIC,OAAD,IAAa;AAC9B,SAAO,MAAMN,QAAN,IAAkB;AACvB,UAAMI,IAAI,GAAG,MAAMP,eAAe,CAACU,SAAhB,CAA0BD,OAA1B,CAAnB;AACAN,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,KADC;AAEPC,MAAAA;AAFO,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAMI,aAAa,GAAG,MAAM;AACjC,SAAO,MAAMR,QAAN,IAAkB;AACvB,UAAMS,SAAS,GAAG,MAAMZ,eAAe,CAACa,MAAhB,EAAxB;AACAV,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,gBADC;AAEPC,MAAAA,IAAI,EAAEK;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;;AAUP,MAAME,WAAW,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAC1C,UAAOA,MAAM,CAACV,IAAd;AACA,SAAK,MAAL;AACE,YAAMW,UAAU,GAAGD,MAAM,CAACT,IAA1B;AACA,YAAMW,YAAY,GAAGH,KAAK,CAACI,GAAN,CAAUC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASL,MAAM,CAACT,IAAP,CAAYc,EAArB,GAA0BD,CAA1B,GAA8BH,UAA7C,CAArB;AACA,aAAOC,YAAY,CAACI,IAAb,CAAkB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,KAAF,GAAUF,CAAC,CAACE,KAAxC,CAAP;;AACF,SAAK,KAAL;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAYX,MAAM,CAACT,IAAnB;AACAQ,MAAAA,KAAK,GAAG,CAAC,GAAGA,KAAJ,EAAWC,MAAM,CAACT,IAAlB,CAAR;AACA,aAAOQ,KAAP;;AACF,SAAK,gBAAL;AACEW,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,aAAOZ,KAAK,GAAEC,MAAM,CAACT,IAArB;;AACF;AACE,aAAOQ,KAAP;AAbF;AAgBD,CAjBD;;AAmBA,eAAeD,WAAf","sourcesContent":["import anecdoteService from '../services/anecdotes'\n\nexport const vote = anecdote => {\n  // return {\n  //   type: 'VOTE',\n  //   data: id\n  // }\n  return async dispatch => {\n    const newAnec = await anecdoteService.updateVotes(anecdote)\n    dispatch({\n      type: 'VOTE',\n      data: newAnec\n    })\n  }\n}\n\nexport const add = (content) => {\n  return async dispatch => {\n    const data = await anecdoteService.createNew(content)\n    dispatch({\n      type: 'ADD',\n      data,\n    })\n  }\n}\n\nexport const initAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll()\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      data: anecdotes\n    })\n  }\n}\n\nconst anecReducer = (state = [], action) => {\n  switch(action.type){\n  case 'VOTE':\n    const updatedAne = action.data\n    const updatedState = state.map(e => e.id !== action.data.id ? e : updatedAne)\n    return updatedState.sort((a, b) => b.votes - a.votes)\n  case 'ADD':\n    console.log(action.data)\n    state = [...state, action.data]\n    return state\n  case 'INIT_ANECDOTES':\n    console.log('hello')\n    return state= action.data\n  default:\n    return state\n  }\n  \n}\n\nexport default anecReducer"]},"metadata":{},"sourceType":"module"}